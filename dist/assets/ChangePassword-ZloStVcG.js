import{r as t,ap as C,ax as P,ay as N,j as s,ar as k,U as S,ak as f,ag as b,at as T,au as F,av as m}from"./index-VMf9MKGU.js";function z(){const[h,w]=t.useState(""),[i,x]=t.useState(""),[e,o]=t.useState({password:void 0,token:void 0}),v=C(),{id:d}=P(),[l,a]=t.useState(!1),{search:j,...L}=N(),c=new URLSearchParams(j).get("Auth");t.useEffect(()=>{(d===null||c===null||d===void 0||c===void 0)&&v("/")},[]);const y=async n=>{if(a(!0),h!==i)o({password:"password does not match"}),setTimeout(()=>{o({password:void 0})},4e3),a(!1);else try{const{data:u}=await F.post(`${T}/auth/change-user-password/${d}`,{token:c,password:i},{headers:{"Content-Type":"application/json"},withCredentials:!0}),{status:g,res:p}=u;if(g===400){const{error:{errorList:r}}=p;o(R=>({...r})),a(!1)}else{if(a(!1),g===200){const{success:{msg:r}}=p;m.success(r),setTimeout(()=>{},3e3)}else{const{error:{msg:r}}=p;m.error(r)}o({password:void 0,token:void 0}),w(""),x("")}}catch(u){a(!1),m.error(u.message)}};return s.jsxs(s.Fragment,{children:[s.jsx(k,{}),s.jsx("div",{className:"formContainer",style:{marginTop:"45px"},children:s.jsxs("div",{className:"leftForm",children:[s.jsx(S,{className:"title",variant:"h4",children:"Reset Password"}),s.jsx("div",{className:"normalForm",children:s.jsx("div",{className:"inputContainer",children:s.jsx(f,{fullWidth:!0,type:"password",value:i,placeholder:"new Password",onChange:n=>x(n.target.value)})})}),s.jsxs("div",{className:"normalForm",children:[s.jsx("div",{className:"inputContainer",children:s.jsx(f,{fullWidth:!0,value:h,type:"password",placeholder:"enter new Password",onChange:n=>w(n.target.value)})}),s.jsx("span",{className:"error",style:{fontSize:"14px"},children:(e.password||e.token)&&e.password?e.password:e.token})]}),s.jsx("button",{onClick:y,disabled:l,style:{display:"flex",alignItems:"center",justifyContent:"center",background:l?"gray":"#1dbf73"},children:l?s.jsx(b,{size:"2rem",color:"primary"}):"Change Password"})]})})]})}export{z as default};
